---
layout: "/layout.astro"
---

# Como visualizar los gr√°ficos de Mermaid en Astro
## Links
- [Documentaci√≥n de Mermaid de integraci√≥n](https://mermaid.js.org/intro/getting-started.html)
- [link del blog tutorial de integraci√≥n a Astro](https://agramont.net/blog/diagraming-with-mermaidjs-astro/)
# A√±adiendo a tu sitio Astro

Vamos a utilizar m√≥dulos **`rehype-mermaid`** y **`Playwright`** y no `mermaid` directamente o la CLI de `mermaid`.

-   **`rehype-mermaid`**
-   **`Playwright`**

> üí°
> **`Playwright`** es un marco para pruebas y automatizaci√≥n web. Lo estamos usando aqu√≠ para **renderizar los diagramas del lado del servidor**. Este es un requisito para el complemento **`rehype-mermaid`**.
> Es un tema m√°s amplio, en el que no entrar√© en detalles aqu√≠, pero pr√°cticamente salva el d√≠a cuando se trata de renderizar los diagramas del lado del servidor.

Para agregar **`MermaidJS`** y **`Expressive Code`** a su sitio **`Astro`**, deber√° instalar los siguientes paquetes en la ra√≠z de su proyecto Astro:

### C√≥mo agregar c√≥digo expresivo, MermaidJS y Playwright a tu sitio Astro

```sh
npx astro add astro-expressive-code
npm install remark-mermaidjs
npx playwright install --with-deps chromium
npm install -D playwright
```

Despu√©s de instalar **`Playwright`**, es posible que vea un mensaje de advertencia de Playwright. Esto se debe a que **`Playwright`** se instala antes que las dependencias del proyecto.

No hice nada m√°s despu√©s de esto y todo sali√≥ bien.

> #### Mensaje de advertencia del dramaturgo
>
> ```text
> ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
> ‚ïë WARNING: It looks like you are running 'npx playwright install' without first ‚ïë
> ‚ïë installing your project's dependencies. ‚ïë
> ‚ïë ‚ïë
> ‚ïë To avoid unexpected behavior, please install your dependencies first, and ‚ïë
> ‚ïë then run Playwright's install command: ‚ïë
> ‚ïë ‚ïë
> ‚ïë npm install ‚ïë
> ‚ïë npx playwright install ‚ïë
> ‚ïë ‚ïë
> ‚ïë If your project does not yet depend on Playwright, first install the ‚ïë
> ‚ïë applicable npm package (most commonly @playwright/test), and ‚ïë
> ‚ïë then run Playwright's install command to download the browsers: ‚ïë
> ‚ïë ‚ïë
> ‚ïë npm install @playwright/test ‚ïë
> ‚ïë npx playwright install ‚ïë
> ‚ïë ‚ïë
> ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
> ```

Si ten√≠a integraci√≥n con **`MDX`** antes o la est√° agregando ahora, es posible que deba ajustar el orden de los complementos en su archivo **`astro.config.mjs`**. El orden de los complementos es importante, ya que se ejecutan en el orden en que aparecen enumerados en el archivo. El complemento **`mdx`** debe aparecer antes del complemento **`astro-expressive-code`**, ya que el complemento **`mdx`** es responsable de analizar el contenido **`MDX`** y convertirlo a HTML, que luego el complemento **`astro-expressive-code`** procesa para agregar resaltado de sintaxis.

Si no est√° utilizando **`MDX`**, puede ignorar d√≥nde lo agregamos y configurarlo a continuaci√≥n.

### Astro.config.mjs b√°sico

```javascript
import { defineConfig } from 'astro/config';
import mdx from '@astrojs/mdx';
import expressiveCode from "astro-expressive-code";
import remarkMermaid from 'remark-mermaidjs'

// https://astro.build/config
export default defineConfig({
  site: 'https://example.com',
  markdown: {
    // Applied to .md and .mdx files
    remarkPlugins: [remarkMermaid],
  },
  integrations: [expressiveCode(), mdx()
});
```