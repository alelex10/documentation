---
layout: "/layout.astro"
---

# Instalación y configuración de Vitest

Vitest es un framework de pruebas unitarias y de integración para proyectos JavaScript/TypeScript, fuertemente integrado con Vite.

Sus características clave incluyen:

1.  **Rapidez:** Aprovecha el sistema de módulos nativo de ES para una carga y ejecución de pruebas muy rápidas.
2.  **Compatibilidad con Jest:** La mayor parte de las APIs de Jest son compatibles, lo que facilita la migración desde proyectos que usan Jest.
3.  **Características Completas:** Incluye soporte para mocking, cobertura de código (a través de c8 o Istanbul), snapshots, y más.
4.  **Fácil Configuración:** Su configuración es mínima, especialmente en proyectos basados en Vite.

### Instalación

```bash
npm install -D vitest
```

### Configuración

- tengo que tene un archivo package.json con el siguiente contenido

```json
"scripts": {
    "test": "vitest"
    }

```

### Ejemplo de prueba

```typescript
import { describe, test, expect } from "vitest";
import { sum } from "./sum.js";

describe("Sum", () => {
  test("sum(1,2) === 3", () => {
    expect(sum(1, 2)).toBe(3);
  });
  test("sum(2,2) === 4", () => {
    expect(sum(2, 2)).toBe(4);
  });
  test("sum(3,2) === 5", () => {
    expect(sum(3, 2)).toBe(5);
  });
});
```

# Excluir build de test

Para evitar que TypeScript compile los archivos de test, puedes agregar una entrada en el archivo `tsconfig.json`:

```json
{
  "compilerOptions": {
    "outDir": "dist",
    "target": "ESNext",
    "strict": true,
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "noEmit": true // Evita la emisión de archivos JavaScript al compilar(tsc)
  },
  "include": ["src/**/*.ts"]
}
```

- Para excluir los archivos de test al hacer build, puedes usar la propiedad `exclude`:
- en el archivo `tsconfig.build.json`

```json 
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "dist",
    "noEmit": false // Permite la emisión de archivos JavaScript al compilar
  }
  "exclude": ["**/*.test.ts", "**/*.spec.ts", "src/pages/docs/test/**"]
}
```
- Configuro el script de build en el `package.json`:

```json
"scripts": {
    "build": "tsc --project tsconfig.build.json"
}
